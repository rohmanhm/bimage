var Bimage=function(){'use strict';var a=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{},b=(a,b)=>{for(const c of Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b)))Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))};let c=new WeakMap(),d=function(a){if(arguments.length===1&&(a===null||a===undefined||typeof a!=='function'&&typeof a!=='object')){return a}return JSON.stringify(arguments)};var f=(a,e)=>{e=Object.assign({cacheKey:d,cache:new Map()},e);let f=function(){let b=c.get(f),d=e.cacheKey.apply(null,arguments);if(b.has(d)){let a=b.get(d);if(typeof e.maxAge!=='number'||Date.now()<a.maxAge){return a.data}}let g=a.apply(null,arguments);b.set(d,{data:g,maxAge:Date.now()+(e.maxAge||0)});return g};b(f,a);c.set(f,e.cache);return f},g=a=>{let b=c.get(a);b&&typeof b.clear==='function'&&b.clear()};f.clear=g;var h=Object.freeze({default:f,__moduleExports:f,clear:g}),i=h&&f||h,j=a&&a.__awaiter||function(a,b,c,d){return new (c||(c=Promise))(function(f,g){function h(a){try{j(d.next(a))}catch(a){g(a)}}function i(a){try{j(d["throw"](a))}catch(a){g(a)}}function j(a){a.done?f(a.value):new c(function(b){b(a.value)}).then(h,i)}j((d=d.apply(a,b||[])).next())})},k=a&&a.__generator||function(a,b){var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,f,g,h;return h={next:i(0),"throw":i(1),"return":i(2)}, typeof Symbol==="function"&&(h[Symbol.iterator]=function(){return this}), h;function i(a){return function(b){return j([a,b])}}function j(h){if(d)throw new TypeError("Generator is already executing.");while(c)try{if(d=1, f&&(g=f[h[0]&2?"return":h[0]?"throw":"next"])&&!(g=g.call(f,h[1])).done)return g;(f=0, g)&&(h=[0,g.value]);switch(h[0]){case 0: case 1:g=h;break;case 4:c.label++;return{value:h[1],done:!1};case 5:c.label++;f=h[1];h=[0];continue;case 7:h=c.ops.pop();c.trys.pop();continue;default:if(!(g=c.trys, g=g.length>0&&g[g.length-1])&&(h[0]===6||h[0]===2)){c=0;continue};if(h[0]===3&&(!g||h[1]>g[0]&&h[1]<g[3])){c.label=h[1];break};if(h[0]===6&&c.label<g[1]){c.label=g[1];g=h;break};if(g&&c.label<g[2]){c.label=g[2];c.ops.push(h);break};g[2]&&c.ops.pop();c.trys.pop();continue};h=b.call(a,c)}catch(a){h=[6,a],f=0}finally{d=g=0};if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},l=function(){function a(a,b){this.path=a;this.attr=b;this.load()}a.prototype.load=function(){return j(this,void 0,void 0,function(){var a=this,b,c,d;return k(this,function(e){switch(e.label){case 0:b=function(b){return new Promise(function(c,d){var e=new Image();e.crossOrigin='Anonymous';e.onload=function(){return c(e)};a.attr&&Object.keys(a.attr).forEach(function(b){var c=a.attr[b];c&&e.setAttribute(b,String(c))});e.src=b})};c=i(b);d=this;return[4,c(this.path)];case 1:d.image=e.sent();return[2,this.image]}})})};a.prototype.base64=function(){try{var a=document.createElement('canvas');a.height=this.height;a.width=this.width;var b=a.getContext('2d');b&&b.drawImage(this.image,0,0);return a.toDataURL('image/jpeg')}catch(a){throw new Error("Bimage: "+a)}};Object.defineProperty(a.prototype,"width",{get:function(){return this.image.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this.image.height},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"node",{get:function(){return this.image},enumerable:!0,configurable:!0});return a}();typeof window?(window.Bimage=l):typeof a&&(a.Bimage=l);var m=l;return m}()
